# SEDB 사양서 (Go 단일 언어 버전)

## 목차
1. 스크립트 언어 사양
2. API 사양
3. TFF 저장 포맷 사양
4. 런타임 구조 사양
5. 개발 환경

---

## 1. 스크립트 언어 사양

### F-01. 스크립트를 이용한 테이블 생성

**기능 설명**  
스크립트 언어를 이용하여 테이블을 생성한다.

**작동 조건**  
`.dcl` 포맷의 파일 또는 서버 미들웨어를 통해 다음 형식의 입력을 받는다.
```
create_table [테이블이름] (
    [열 타입] [열 이름] NOTNULL(선택) KEY(선택, 한 테이블 내 중복 불가),
    [열 타입] [열 이름2] NOTNULL(선택) KEY(선택, 한 테이블 내 중복 불가)
    ...
);

CREATE_TABLE [테이블이름] (
    [열 타입] [열 이름] NOTNULL(선택) KEY(선택, 한 테이블 내 중복 불가),
    [열 타입] [열 이름2] NOTNULL(선택) KEY(선택, 한 테이블 내 중복 불가)
    ...
);
```

**에러 조건**  
1. 문법 오류
2. 동일한 이름의 테이블이 이미 존재
3. `KEY`로 지정된 열이 둘 이상 존재

---

### F-02. 스크립트를 이용한 행 데이터 추가

**기능 설명**  
스크립트 언어를 이용하여 테이블에 행 데이터를 추가한다.

**작동 조건**  
`.dcl` 포맷 파일 또는 서버 미들웨어를 통해 다음 형식의 입력을 받는다.
```
ADD [테이블이름] ([데이터1], [데이터2], ...);
add [테이블이름] ([데이터1], [데이터2], ...);
```

**에러 조건**  
1. 문법 오류
2. 선택한 테이블이 존재하지 않음
3. 데이터 구조가 테이블 정의와 불일치
4. 키 데이터 없음(NULL 포함)
5. 키 데이터 중복
6. 추가 데이터 없음

---

### F-03. 스크립트를 이용한 행 데이터 수정

**기능 설명**  
스크립트 언어를 이용하여 특정 행 데이터를 수정한다.

**작동 조건**
```
UPDATE [테이블이름] [행 Key값] ([데이터1], [데이터2], ...);
update [테이블이름] [행 Key값] ([데이터1], [데이터2], ...);
```

**에러 조건**  
1. 문법 오류
2. 선택한 테이블이 존재하지 않음
3. 데이터 구조 불일치
4. 키 데이터 없음(NULL 포함)
5. 키 데이터 중복
6. 수정 데이터 없음

---

### F-04. 스크립트를 이용한 행 데이터 불러오기

**기능 설명**  
스크립트 언어를 이용하여 특정 키의 행 데이터를 조회한다.

**작동 조건**
```
GET [테이블이름] [행 Key값];
get [테이블이름] [행 Key값];
```

**에러 조건**  
1. 문법 오류
2. 선택한 테이블이 존재하지 않음
3. 키 데이터 없음
4. 키/테이블 선택 안 함

---

### F-05. 스크립트를 이용한 데이터 삭제

**기능 설명**  
스크립트 언어를 이용하여 특정 행 데이터를 삭제한다.

**작동 조건**
```
DELETE [테이블이름] [행 Key값];
delete [테이블이름] [행 Key값];
DEL [테이블이름] [행 Key값];
del [테이블이름] [행 Key값];
```

**에러 조건**  
1. 문법 오류
2. 선택한 테이블이 존재하지 않음
3. 키 데이터 없음
4. 키/테이블 선택 안 함

---

## 2. API 사양
*(추후 구현 상세 정의 예정)*

---

## 3. TFF 저장 포맷 사양

**파일 구조 예시**
```
Title : "파일이름 (테이블 이름)"

TABLE_S BEGIN
    [열 타입] [열 이름],
    [열 타입] [열 이름],
    [열 타입] [열 이름],
    ...
END

DATA_SECTION :
Data-> [데이터1, 데이터2, 데이터3] ->End
```

---

## 4. 런타임 구조 사양

**전체 구조**
```
REPL / API / GUI Editor
-----------------------
Script Parser
-----------------------
VM
-----------------------
TFF Parser
-----------------------
File I/O Engine
```

**각 구성 요소 역할**  
1. **REPL / API / GUI Editor**  
   - 사용자 또는 서버와 직접 상호작용
   - 보안 키 인증 필요  
     ```
     REPL 실행 시: SEDB REPL [유저 키]
     API 호출: script_ex{"스크립트", [유저 키]} 또는 [기능]{[데이터], [유저키]}
     GUI 실행 시: 입력창에 유저 키 입력
     ```

2. **Script Parser** – 스크립트 문법 해석  
3. **VM** – 명령 실행 및 메모리 관리  
4. **TFF Parser** – TFF 파일 포맷 해석  
5. **File I/O Engine** – 파일 읽기/쓰기 처리

---

## 5. 개발 환경

- **개발 언어**: Go (단일 언어)  
- **코드 편집기**: VS Code, GoLand  
- **버전 관리**: Git  
